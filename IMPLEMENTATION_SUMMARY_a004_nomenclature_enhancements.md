# –ò—Ç–æ–≥–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –î–æ—Ä–∞–±–æ—Ç–∫–∞ –∞–≥—Ä–µ–≥–∞—Ç–∞ a004_nomenclature

## –î–∞—Ç–∞: 16.11.2025

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç—Ä–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª—è –∏–∑ 1–° –≤ –∞–≥—Ä–µ–≥–∞—Ç `a004_nomenclature` —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–º–ø–æ—Ä—Ç–∞ —á–µ—Ä–µ–∑ u501 –∏ UI:

1. **is_assembly** (–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞) - boolean
2. **base_nomenclature_ref** (–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞–î–ª—è–û—Å—Ç–∞—Ç–∫–æ–≤) - —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—É
3. **delete_obsolete** - –æ–ø—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π

---

## 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –§–∞–π–ª: `crates/backend/src/shared/data/db.rs`

#### –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É `a004_nomenclature`:

```sql
-- CREATE TABLE
is_assembly INTEGER NOT NULL DEFAULT 0,
base_nomenclature_ref TEXT,

-- ALTER TABLE (–¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü)
ALTER TABLE a004_nomenclature ADD COLUMN is_assembly INTEGER NOT NULL DEFAULT 0;
ALTER TABLE a004_nomenclature ADD COLUMN base_nomenclature_ref TEXT;
```

#### –ú–∏–≥—Ä–∞—Ü–∏—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–µ–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ `PRAGMA table_info`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ –Ω–æ–≤—ã—Ö, —Ç–∞–∫ –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

---

## 2. Aggregate (Contracts)

### –§–∞–π–ª: `crates/contracts/src/domain/a004_nomenclature/aggregate.rs`

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `Nomenclature`:

```rust
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Nomenclature {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    
    #[serde(rename = "isAssembly", default)]
    pub is_assembly: bool,
    
    #[serde(rename = "baseNomenclatureRef")]
    pub base_nomenclature_ref: Option<String>,
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

1. **new_for_insert()** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. **new_with_id()** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
3. **update()** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∏–∑ DTO

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ DTO:

```rust
#[derive(Debug, Clone, Serialize, Deserialize, Default)]
pub struct NomenclatureDto {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    
    #[serde(rename = "isAssembly")]
    pub is_assembly: Option<bool>,
    
    #[serde(rename = "baseNomenclatureRef")]
    pub base_nomenclature_ref: Option<String>,
}
```

---

## 3. Repository

### –§–∞–π–ª: `crates/backend/src/domain/a004_nomenclature/repository.rs`

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Model:

```rust
#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel, Serialize, Deserialize)]
#[sea_orm(table_name = "a004_nomenclature")]
pub struct Model {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    pub is_assembly: bool,
    pub base_nomenclature_ref: Option<String>,
    // ...
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **From<Model> for Nomenclature** - –º–∞–ø–ø–∏–Ω–≥ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
2. **insert()** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
3. **update()** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

#### –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è:

```rust
/// –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å–∏ –ø–æ —Å–ø–∏—Å–∫—É ID (–∂–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
pub async fn delete_by_ids(ids: Vec<Uuid>) -> anyhow::Result<u64>
```

---

## 4. OData –º–æ–¥–µ–ª—å

### –§–∞–π–ª: `crates/backend/src/domain/a004_nomenclature/u501_import_from_ut.rs`

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `UtNomenclatureOData`:

```rust
pub struct UtNomenclatureOData {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    
    // –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–±–æ—Ä–∫–∞
    #[serde(rename = "–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞", default)]
    pub is_assembly: bool,
    
    // –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –¥–ª—è –æ—Å—Ç–∞—Ç–∫–æ–≤ (—Å—Å—ã–ª–∫–∞)
    #[serde(rename = "–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞–î–ª—è–û—Å—Ç–∞—Ç–∫–æ–≤_Key", default)]
    pub base_nomenclature_key: Option<String>,
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

1. **to_aggregate()** - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∏–∑ OData –≤ –∞–≥—Ä–µ–≥–∞—Ç
   ```rust
   agg.is_assembly = self.is_assembly;
   agg.base_nomenclature_ref = Self::normalize_parent_id(&self.base_nomenclature_key);
   ```

2. **should_update()** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
   ```rust
   || existing.is_assembly != self.is_assembly
   || existing.base_nomenclature_ref != normalized_base_ref
   ```

---

## 5. UseCase u501 - –ò–º–ø–æ—Ä—Ç

### –§–∞–π–ª: `crates/contracts/src/usecases/u501_import_from_ut/request.rs`

#### –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ –≤ ImportRequest:

```rust
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ImportRequest {
    pub connection_id: String,
    pub target_aggregates: Vec<String>,
    pub mode: ImportMode,
    
    /// –£–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ (–∂–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
    #[serde(default)]
    pub delete_obsolete: bool,
}
```

### –§–∞–π–ª: `crates/backend/src/usecases/u501_import_from_ut/executor.rs`

#### –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ import_nomenclature():

1. **–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**
   ```rust
   async fn import_nomenclature(
       &self,
       session_id: &str,
       connection: &Connection1CDatabase,
       delete_obsolete: bool,
   ) -> Result<()>
   ```

2. **–°–±–æ—Ä ID –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞:**
   - HashSet `unique_ids` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö ID –∏–∑ 1–°
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ UUID

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞:**
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π `is_assembly` –∏ `base_nomenclature_ref`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `to_aggregate()` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞

4. **–õ–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π:**
   ```rust
   if delete_obsolete && !unique_ids.is_empty() {
       // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ ID –∏–∑ –ë–î
       let db_ids: HashSet<Uuid> = db_items
           .iter()
           .map(|item| item.base.id.value())
           .collect();
       
       // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º source IDs
       let source_ids: HashSet<Uuid> = unique_ids
           .iter()
           .filter_map(|s| Uuid::parse_str(s).ok())
           .collect();
       
       // –ù–∞—Ö–æ–¥–∏–º —Ä–∞–∑–Ω–∏—Ü—É
       let obsolete_ids: Vec<Uuid> = db_ids
           .difference(&source_ids)
           .copied()
           .collect();
       
       // –£–¥–∞–ª—è–µ–º
       if !obsolete_ids.is_empty() {
           repository::delete_by_ids(obsolete_ids).await?;
       }
   }
   ```

5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
   - –û—à–∏–±–∫–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏

---

## 6. Frontend UI

### –§–∞–π–ª: `crates/frontend/src/usecases/u501_import_from_ut/view.rs`

#### –î–æ–±–∞–≤–ª–µ–Ω signal:

```rust
let (delete_obsolete, set_delete_obsolete) = signal(false);
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è UI "–û–ø—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞":

```rust
<div style="margin: 20px 0;">
    <label style="display: block; margin-bottom: 8px; font-weight: bold;">
        "–û–ø—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞:"
    </label>
    <div style="padding: 8px; background: #fff3cd; border-radius: 4px; border: 1px solid #ffc107;">
        <label>
            <input
                type="checkbox"
                prop:checked=move || delete_obsolete.get()
                on:change=move |ev| { set_delete_obsolete.set(event_target_checked(&ev)); }
            />
            " –£–¥–∞–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–ø–∏—Å–∏ (–∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ 1–°)"
        </label>
        <div style="margin-top: 5px; font-size: 12px; color: #856404;">
            "‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –ó–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ 1–°, –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–∑ –ë–î (–∂–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)"
        </div>
    </div>
</div>
```

#### –û–±–Ω–æ–≤–ª–µ–Ω ImportRequest:

```rust
let request = ImportRequest {
    connection_id: conn_id,
    target_aggregates: targets,
    mode: ImportMode::Interactive,
    delete_obsolete: delete_obsolete.get(),
};
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π –≤ –ë–î

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
PRAGMA table_info('a004_nomenclature');

-- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª—è:
-- is_assembly INTEGER NOT NULL DEFAULT 0
-- base_nomenclature_ref TEXT
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞

1. **–ë–∞–∑–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è):**
   ```
   1. –û—Ç–∫—Ä—ã—Ç—å UI u501
   2. –í—ã–±—Ä–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
   3. –í—ã–±—Ä–∞—Ç—å a004_nomenclature
   4. –ù–ï –≤–∫–ª—é—á–∞—Ç—å "–£–¥–∞–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–ø–∏—Å–∏"
   5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç
   6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–æ–≤—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–∏–ª–∏—Å—å
   ```

2. **–ò–º–ø–æ—Ä—Ç —Å —É–¥–∞–ª–µ–Ω–∏–µ–º:**
   ```
   1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å –≤—Ä—É—á–Ω—É—é –≤ –ë–î
   2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç —Å —Ñ–ª–∞–≥–æ–º delete_obsolete
   3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä—É—á–Ω–∞—è –∑–∞–ø–∏—Å—å —É–¥–∞–ª–∏–ª–∞—Å—å
   4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–ø–∏—Å–∏ –∏–∑ 1–° –æ—Å—Ç–∞–ª–∏—Å—å
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π –∏–∑ 1–°:**
   ```sql
   SELECT 
       id, 
       description, 
       is_assembly, 
       base_nomenclature_ref 
   FROM a004_nomenclature 
   WHERE is_assembly = 1;
   ```

### 3. UI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–∏ "–û–ø—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞"
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —á–µ–∫–±–æ–∫—Å–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–ª–∞–≥ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ backend

---

## –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π 1–° ‚Üí –ë–î

| –ü–æ–ª–µ –≤ 1–° (OData)                  | –ü–æ–ª–µ –≤ –ë–î                | –¢–∏–ø       | Nullable |
|------------------------------------|--------------------------|-----------|----------|
| –¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞                    | is_assembly              | BOOLEAN   | NOT NULL |
| –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞–î–ª—è–û—Å—Ç–∞—Ç–∫–æ–≤_Key        | base_nomenclature_ref    | TEXT      | NULL     |

---

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. Nullable –ø–æ–ª–µ base_nomenclature_ref
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º (—á–∞—Å—Ç–æ –≤ 1–° —ç—Ç–æ –ø–æ–ª–µ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ)
- –ü—Ä–∏—Ö–æ–¥–∏—Ç –∫–∞–∫ `–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞–î–ª—è–û—Å—Ç–∞—Ç–∫–æ–≤_Key` –∏–∑ OData
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `normalize_parent_id()` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ UUID

### 2. Boolean –ø–æ–ª–µ is_assembly
- –í SQLite —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ INTEGER (0/1)
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é false (0)
- –ü—Ä–∏—Ö–æ–¥–∏—Ç –∫–∞–∫ boolean –∏–∑ OData

### 3. –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —Ñ–ª–∞–≥ `delete_obsolete = true`
- –ñ–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (DELETE, –Ω–µ soft delete)
- –£–¥–∞–ª—è—é—Ç—Å—è –¢–û–õ–¨–ö–û –∑–∞–ø–∏—Å–∏ —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ UUID
- –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è

### 4. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –ú–∏–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –ø–æ–ª—É—á–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ API –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ò–º–ø–æ—Ä—Ç:
- –ë–∞—Ç—á–∞–º–∏ –ø–æ 100 –∑–∞–ø–∏—Å–µ–π
- Pause 1 —Å–µ–∫—É–Ω–¥—É –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏
- –í—Å–µ ID —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (HashSet)

### –£–¥–∞–ª–µ–Ω–∏–µ:
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ü–û–°–õ–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–∞
- –û–¥–∏–Ω SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö ID
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `IN` clause —Å prepared statement

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –§–ª–∞–≥ `delete_obsolete` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –í–°–ï–ú –∞–≥—Ä–µ–≥–∞—Ç–∞–º –≤ –∑–∞–ø—Ä–æ—Å–µ
2. –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¢–û–õ–¨–ö–û –¥–ª—è `a004_nomenclature`
3. –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–º–µ–Ω–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ (–Ω–µ Soft Delete)
4. –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **Production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `delete_obsolete = false` –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
   - –í–∫–ª—é—á–∞—Ç—å —Ñ–ª–∞–≥ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö
   - –î–µ–ª–∞—Ç—å backup –ë–î –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º —Å —É–¥–∞–ª–µ–Ω–∏–µ–º

2. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
   - –ê–ª–µ—Ä—Ç–∏—Ç—å –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —É–¥–∞–ª–µ–Ω–∏–π

---

## –í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å

- **Contracts:** v0.1.0 (–¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ aggregate –∏ request)
- **Backend:** v0.1.0 (–æ–±–Ω–æ–≤–ª–µ–Ω—ã repository, service, executor)
- **Frontend:** v0.1.0 (–¥–æ–±–∞–≤–ª–µ–Ω UI –¥–ª—è delete_obsolete)

---

## –ê–≤—Ç–æ—Ä—ã

- –î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: 16.11.2025
- –ó–∞–¥–∞—á–∞: –î–æ—Ä–∞–±–æ—Ç–∫–∞ –∞–≥—Ä–µ–≥–∞—Ç–∞ a004_nomenclature

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—è –≤ –ë–î
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å aggregate –∏ DTO
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å repository
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å OData –º–æ–¥–µ–ª—å
5. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç —Å —É–¥–∞–ª–µ–Ω–∏–µ–º
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è —Ñ–ª–∞–≥–∞ delete_obsolete
7. üî≤ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
8. üî≤ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
9. üî≤ –î–æ–±–∞–≤–∏—Ç—å UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –≤ –ø—Ä–æ–≥—Ä–µ—Å—Å

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏—é:
- ‚úÖ Backend –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ Frontend –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ù–µ—Ç –ªinter –æ—à–∏–±–æ–∫
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.

