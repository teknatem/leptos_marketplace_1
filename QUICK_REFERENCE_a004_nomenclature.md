# –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞: –î–æ—Ä–∞–±–æ—Ç–∫–∞ a004_nomenclature

## –ù–æ–≤—ã–µ –ø–æ–ª—è

### 1. is_assembly (–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞)
- **–¢–∏–ø:** `bool`
- **–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `false`
- **OData:** `–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞`
- **–ë–î:** `is_assembly INTEGER NOT NULL DEFAULT 0`

### 2. base_nomenclature_ref (–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞–î–ª—è–û—Å—Ç–∞—Ç–∫–æ–≤)
- **–¢–∏–ø:** `Option<String>` (UUID)
- **–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `None`
- **OData:** `–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞–î–ª—è–û—Å—Ç–∞—Ç–∫–æ–≤_Key`
- **–ë–î:** `base_nomenclature_ref TEXT`

### 3. delete_obsolete (—Ñ–ª–∞–≥ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞)
- **–¢–∏–ø:** `bool`
- **–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `false`
- **UI:** –ß–µ–∫–±–æ–∫—Å –≤ —Å–µ–∫—Ü–∏–∏ "–û–ø—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞"
- **–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ 1–°

---

## –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend
1. ‚úÖ `crates/backend/src/shared/data/db.rs` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
2. ‚úÖ `crates/backend/src/domain/a004_nomenclature/repository.rs` - Model, CRUD, delete_by_ids
3. ‚úÖ `crates/backend/src/domain/a004_nomenclature/u501_import_from_ut.rs` - OData –º–∞–ø–ø–∏–Ω–≥
4. ‚úÖ `crates/backend/src/usecases/u501_import_from_ut/executor.rs` - –ª–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –∏ —É–¥–∞–ª–µ–Ω–∏—è

### Contracts
5. ‚úÖ `crates/contracts/src/domain/a004_nomenclature/aggregate.rs` - aggregate –∏ DTO
6. ‚úÖ `crates/contracts/src/usecases/u501_import_from_ut/request.rs` - ImportRequest

### Frontend
7. ‚úÖ `crates/frontend/src/usecases/u501_import_from_ut/view.rs` - UI –¥–ª—è delete_obsolete

---

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ë–∞–∑–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è)
```
1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ u501 - –ò–º–ø–æ—Ä—Ç –∏–∑ –£–¢ 11
3. –í—ã–±—Ä–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
4. –í—ã–±—Ä–∞—Ç—å a004_nomenclature
5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç
```

### 2. –ò–º–ø–æ—Ä—Ç —Å —É–¥–∞–ª–µ–Ω–∏–µ–º —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
```
1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ u501 - –ò–º–ø–æ—Ä—Ç –∏–∑ –£–¢ 11
3. –í—ã–±—Ä–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
4. –í—ã–±—Ä–∞—Ç—å a004_nomenclature
5. ‚úÖ –í–∫–ª—é—á–∏—Ç—å "–£–¥–∞–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–ø–∏—Å–∏"
6. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç
```

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** –ó–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ 1–°, –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è!

---

## SQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è
```sql
SELECT 
    id, 
    description, 
    is_assembly, 
    base_nomenclature_ref 
FROM a004_nomenclature 
LIMIT 10;
```

### –ù–∞–π—Ç–∏ –∑–∞–ø–∏—Å–∏ —Å is_assembly = true
```sql
SELECT 
    id, 
    description, 
    is_assembly 
FROM a004_nomenclature 
WHERE is_assembly = 1;
```

### –ù–∞–π—Ç–∏ –∑–∞–ø–∏—Å–∏ —Å base_nomenclature_ref
```sql
SELECT 
    id, 
    description, 
    base_nomenclature_ref 
FROM a004_nomenclature 
WHERE base_nomenclature_ref IS NOT NULL;
```

---

## API

### –ó–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º
```bash
curl -X POST http://localhost:3000/api/u501/import/start \
  -H "Content-Type: application/json" \
  -d '{
    "connection_id": "uuid-here",
    "target_aggregates": ["a004_nomenclature"],
    "mode": "interactive",
    "delete_obsolete": true
  }'
```

---

## –õ–æ–≥–∏

### –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö

**–£—Å–ø–µ—à–Ω—ã–π –∏–º–ø–æ—Ä—Ç:**
```
‚úÖ Nomenclature import completed: total_processed=100, inserted=10, updated=90
üîë UUID statistics: unique=100, empty=0, invalid=0
```

**–£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π:**
```
üóëÔ∏è  Checking for obsolete records to delete...
üóëÔ∏è  Found 5 obsolete records to delete
‚úÖ Deleted 5 obsolete records
```

**–ù–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π:**
```
‚úÖ No obsolete records found
```

---

## –°–∫—Ä–∏–Ω—à–æ—Ç—ã UI

### –°–µ–∫—Ü–∏—è "–û–ø—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞"
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –û–ø—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞:                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚òê –£–¥–∞–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–ø–∏—Å–∏ (–∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ 1–°)        ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –ó–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ 1–°,       ‚îÇ
‚îÇ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–∑ –ë–î (–∂–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–ª—è –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –ë–î
**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend - –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –§–ª–∞–≥ `delete_obsolete` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `true`
2. –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–≤–µ—Ä–∫–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
3. –í –ë–î –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ 1–°

### –ü—Ä–æ–±–ª–µ–º–∞: –£–¥–∞–ª–∏–ª–æ—Å—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø–∏—Å–µ–π
**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:**
1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç –ë–ï–ó —Ñ–ª–∞–≥–∞ delete_obsolete
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –≤–∫–ª—é—á–µ–Ω–∏–µ–º —Ñ–ª–∞–≥–∞

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è
```bash
# Backend
cargo check --package backend

# Frontend
cargo check --package frontend --target wasm32-unknown-unknown

# –í—Å–µ –≤–º–µ—Å—Ç–µ
cargo check --workspace
```

### –ó–∞–ø—É—Å–∫
```bash
# Backend
cargo run --bin backend

# Frontend (trunk)
cd crates/frontend
trunk serve
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `IMPLEMENTATION_SUMMARY_a004_nomenclature_enhancements.md`
- UI –∏–∑–º–µ–Ω–µ–Ω–∏—è: `UI_UPDATES_u501_delete_obsolete.md`
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ u501: `memory-bank/usecase-u501-import-from-ut.md`

---

*–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 16.11.2025*

