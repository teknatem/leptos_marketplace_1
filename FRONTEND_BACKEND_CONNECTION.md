# –ü—Ä–æ–±–ª–µ–º–∞: Frontend –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Backend

## –°–∏–º–ø—Ç–æ–º—ã

```
–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: Failed to send request: TypeError: Failed to fetch
```

Backend –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

```
‚úì Server successfully bound to port 3000
```

## üîç –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

**Frontend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–¥—Ä–µ—Å backend** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–¥—Ä–µ—Å–∞, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª –∑–∞–≥—Ä—É–∂–µ–Ω:

```rust
// –í —Ñ–∞–π–ª–µ api_utils.rs
pub fn api_base() -> String {
    let hostname = window.location.hostname(); // ‚Üê –±–µ—Ä–µ—Ç—Å—è –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞!
    format!("{}//{}:3000", protocol, hostname)
}
```

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

| –ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç frontend                                | window.location.hostname | Backend URL                 | –†–∞–±–æ—Ç–∞–µ—Ç?          |
| -------------------------------------------------- | ------------------------ | --------------------------- | ------------------ |
| `file:///C:/...`                                   | (–ø—É—Å—Ç–æ)                  | `:3000`                     | ‚ùå –ù–ï–¢             |
| `http://localhost/...`                             | `localhost`              | `http://localhost:3000`     | ‚úÖ –¢–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ |
| `http://192.168.1.100/...`                         | `192.168.1.100`          | `http://192.168.1.100:3000` | ‚úÖ –î–ê              |
| `http://–∫–æ–º–ø—å—é—Ç–µ—Ä1/...` –Ω–æ backend –Ω–∞ `–∫–æ–º–ø—å—é—Ç–µ—Ä2` | `–∫–æ–º–ø—å—é—Ç–µ—Ä1`             | `http://–∫–æ–º–ø—å—é—Ç–µ—Ä1:3000`    | ‚ùå –ù–ï–¢             |

---

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: Backend –∏ Frontend –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

1. –ü–æ–º–µ—Å—Ç–∏—Ç–µ –ø–∞–ø–∫—É `dist/` (frontend) —Ä—è–¥–æ–º —Å `backend.exe`
2. Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–∞–µ—Ç frontend –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://<SERVER-IP>:3000`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
C:\Users\udv\Desktop\MPI\
‚îú‚îÄ‚îÄ backend.exe
‚îú‚îÄ‚îÄ config.toml
‚îú‚îÄ‚îÄ dist\                    ‚Üê frontend –∑–¥–µ—Å—å
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ pkg\
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ data\
‚îÇ   ‚îî‚îÄ‚îÄ app.db
‚îî‚îÄ‚îÄ logs\
    ‚îî‚îÄ‚îÄ backend.log
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ Frontend –∏ backend –Ω–∞ –æ–¥–Ω–æ–º –∞–¥—Ä–µ—Å–µ
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å CORS
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"
- ‚úÖ –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ä—Ç (3000) –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å

---

### –†–µ—à–µ–Ω–∏–µ 2: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è API URL

–ï—Å–ª–∏ frontend –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –∏–∑–º–µ–Ω–∏—Ç–µ `api_utils.rs`:

```rust
pub fn api_base() -> String {
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚Üí window.location
    if let Ok(api_url) = std::env::var("VITE_API_URL") {
        return api_url;
    }

    let window = match web_sys::window() {
        Some(w) => w,
        None => return String::new(),
    };
    let location = window.location();
    let protocol = location.protocol().unwrap_or_else(|_| "http:".to_string());
    let hostname = location.hostname().unwrap_or_else(|_| "127.0.0.1".to_string());
    format!("{}//{}:3000", protocol, hostname)
}
```

–ó–∞—Ç–µ–º –ø—Ä–∏ —Å–±–æ—Ä–∫–µ frontend:

```bash
set VITE_API_URL=http://192.168.1.100:3000
trunk build --release
```

---

### –†–µ—à–µ–Ω–∏–µ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è Frontend

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `dist/config.js`:

```javascript
window.APP_CONFIG = {
  apiUrl: "http://192.168.1.100:3000", // ‚Üê –ê–¥—Ä–µ—Å backend
};
```

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤ `index.html`:

```html
<head>
  <script src="/config.js"></script>
  ...
</head>
```

–ò–∑–º–µ–Ω–∏—Ç–µ `api_utils.rs`:

```rust
use wasm_bindgen::prelude::*;

#[wasm_bindgen]
extern "C" {
    #[wasm_bindgen(js_namespace = ["window", "APP_CONFIG"], js_name = apiUrl)]
    static API_URL: Option<String>;
}

pub fn api_base() -> String {
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: config.js ‚Üí window.location
    if let Some(url) = API_URL.as_string() {
        return url;
    }

    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –∫–∞–∫ –±—ã–ª–æ
}
```

---

### –†–µ—à–µ–Ω–∏–µ 4: Nginx Reverse Proxy (–¥–ª—è Production)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ reverse proxy:

```nginx
server {
    listen 80;
    server_name your-domain.com;

    # Frontend (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã)
    location / {
        root /path/to/dist;
        try_files $uri $uri/ /index.html;
    }

    # Backend API
    location /api/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

–¢–µ–ø–µ—Ä—å –∏ frontend, –∏ backend –Ω–∞ –æ–¥–Ω–æ–º –¥–æ–º–µ–Ω–µ - –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ—Ç!

---

## üî• –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ —Å–ª—É—á–∞—è

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP —Å–µ—Ä–≤–µ—Ä–∞

–ù–∞ Windows Server –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```cmd
ipconfig | findstr IPv4
```

–î–æ–ø—É—Å—Ç–∏–º, –ø–æ–ª—É—á–∏–ª–∏: `192.168.1.100`

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ

PowerShell –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

```powershell
New-NetFirewallRule -DisplayName "Backend Port 3000" -Direction Inbound -LocalPort 3000 -Protocol TCP -Action Allow
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

–° –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://192.168.1.100:3000
```

–î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –®–∞–≥ 4: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π frontend

**–í–∞—Ä–∏–∞–Ω—Ç A: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `dist/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ä—è–¥–æ–º —Å backend.exe**

–¢–æ–≥–¥–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ: `http://192.168.1.100:3000`

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò–∑–º–µ–Ω–∏—Ç–µ API URL –≤ frontend**

–í —Ñ–∞–π–ª–µ `dist/` —Å–æ–∑–¥–∞–π—Ç–µ `config.js`:

```javascript
window.APP_CONFIG = {
  apiUrl: "http://192.168.1.100:3000",
};
```

–ò –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –µ–≥–æ –≤ `index.html` –ø–µ—Ä–µ–¥ –¥—Ä—É–≥–∏–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏.

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ backend —Ä–∞–±–æ—Ç–∞–µ—Ç

–ù–∞ —Å–∞–º–æ–º —Å–µ—Ä–≤–µ—Ä–µ:

```cmd
curl http://localhost:3000/api/health
```

–ò–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:3000`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

–° –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:

```cmd
curl http://192.168.1.100:3000/api/health
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞ –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ

```powershell
Get-NetFirewallRule -DisplayName "*3000*"
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12)

–û—Ç–∫—Ä–æ–π—Ç–µ **Developer Tools** ‚Üí **Console** ‚Üí **Network**

–ü—Ä–∏ –æ—à–∏–±–∫–µ "Failed to fetch" —Å–º–æ—Ç—Ä–∏—Ç–µ:

- –ö—É–¥–∞ –∏–¥–µ—Ç –∑–∞–ø—Ä–æ—Å (Request URL)
- –û—à–∏–±–∫—É (Status)

**–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:**

| –û—à–∏–±–∫–∞                   | –ü—Ä–∏—á–∏–Ω–∞                            | –†–µ—à–µ–Ω–∏–µ                                             |
| ------------------------ | ---------------------------------- | --------------------------------------------------- |
| `ERR_CONNECTION_REFUSED` | Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –ø–æ—Ä—Ç –∑–∞–∫—Ä—ã—Ç | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ backend –∏ —Ñ–∞–π—Ä–≤–æ–ª                         |
| `ERR_NAME_NOT_RESOLVED`  | –ù–µ–≤–µ—Ä–Ω—ã–π hostname                  | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP –∞–¥—Ä–µ—Å                                |
| `CORS error`             | Backend –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã       | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å OK)           |
| `Mixed content`          | HTTPS —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚Üí HTTP API          | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è backend –∏–ª–∏ HTTP –¥–ª—è frontend |

---

## üìã –ß–µ–∫–ª–∏—Å—Ç —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

- [ ] Backend –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Server successfully bound"
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ (`ipconfig`)
- [ ] –ü–æ—Ä—Ç 3000 –æ—Ç–∫—Ä—ã—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ
- [ ] –° —Å–∞–º–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø —Ä–∞–±–æ—Ç–∞–µ—Ç (`http://localhost:3000`)
- [ ] –° –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –¥–æ—Å—Ç—É–ø —Ä–∞–±–æ—Ç–∞–µ—Ç (`http://<SERVER-IP>:3000`)
- [ ] Frontend –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É `http://<SERVER-IP>:3000` (–Ω–µ `file://`)
- [ ] –í –±—Ä–∞—É–∑–µ—Ä–µ –Ω–µ—Ç –æ—à–∏–±–æ–∫ CORS –∏–ª–∏ Mixed Content
- [ ] –ü–∞–ø–∫–∞ `dist/` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ä—è–¥–æ–º —Å `backend.exe`

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±:**

1. –ü–æ–ª–æ–∂–∏—Ç–µ `dist/` —Ä—è–¥–æ–º —Å `backend.exe`
2. –û—Ç–∫—Ä–æ–π—Ç–µ firewall
3. –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –ø–æ –∞–¥—Ä–µ—Å—É `http://<SERVER-IP>:3000`

**–≠—Ç–æ "–ø—Ä–æ—Å—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç"** –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫! üéâ

---

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

–°–æ–±–µ—Ä–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

1. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

   ```cmd
   ipconfig /all > network_info.txt
   netstat -ano | findstr :3000 > port_info.txt
   ```

2. **–í –±—Ä–∞—É–∑–µ—Ä–µ (F12 ‚Üí Network):**

   - –°–∫—Ä–∏–Ω—à–æ—Ç –æ—à–∏–±–∫–∏
   - Request URL
   - Response

3. **–õ–æ–≥–∏ backend:**
   ```
   C:\Users\udv\Desktop\MPI\logs\backend.log
   ```

–ò –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
