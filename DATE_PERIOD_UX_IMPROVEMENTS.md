# Улучшения UX выбора периода дат

## Реализованные функции

### 1. Нативный календарь для выбора дат

**Было:** Использовался текстовый `Input` компонент из Thaw с placeholder "ГГГГ-ММ-ДД"

**Стало:** Используется нативный `<input type="date">` который:

- Открывает системный календарь при клике
- Обеспечивает правильный формат даты
- Работает на всех платформах (Windows, Mac, Linux, Mobile)
- Улучшает UX - не нужно вводить дату вручную

### 2. Автоматическое заполнение даты окончания

**Функционал:** При выборе даты начала периода автоматически заполняется дата окончания последним днем месяца

**Условия автозаполнения:**

- Дата начала должна быть выбрана
- Дата окончания должна быть пустой (не заполнена пользователем)
- Если пользователь уже ввел дату окончания, она не перезаписывается

**Примеры:**

- Выбрана дата начала: `2024-02-15` → Автоматически устанавливается дата окончания: `2024-02-29` (високосный год)
- Выбрана дата начала: `2024-06-01` → Автоматически устанавливается дата окончания: `2024-06-30`
- Выбрана дата начала: `2024-12-10` → Автоматически устанавливается дата окончания: `2024-12-31`

## Технические детали

### Функция `calculate_end_of_month`

Вычисляет последний день месяца с учетом:

- Месяцев с 30 днями (апрель, июнь, сентябрь, ноябрь)
- Месяцев с 31 днем (январь, март, май, июль, август, октябрь, декабрь)
- Февраля с учетом високосных годов:
  - Високосный год: 29 дней
  - Обычный год: 28 дней

### Логика високосного года

```rust
if (year % 4 == 0 && year % 100 != 0) || (year % 400 == 0) {
    29  // Високосный год
} else {
    28  // Обычный год
}
```

### Effect для автозаполнения

```rust
Effect::new(move |prev: Option<String>| {
    let current_from = from_date.get();

    // Skip first run
    if prev.is_none() {
        return current_from.clone();
    }

    // Only process if from_date changed and has value
    if Some(&current_from) != prev.as_ref() && !current_from.is_empty() {
        // Only auto-fill if to_date is empty
        if to_date.get_untracked().is_empty() {
            if let Some(end_of_month) = calculate_end_of_month(&current_from) {
                to_date.set(end_of_month);
            }
        }
    }

    current_from
});
```

## Стилизация

Нативные input элементы стилизованы в соответствии с дизайн-системой Thaw:

```rust
style="width: 100%; padding: 6px; border: 1px solid var(--thaw-color-neutral-stroke-1); border-radius: 4px;"
```

## Измененный файл

- `crates/frontend/src/shared/universal_dashboard/ui/condition_editor/tabs/date_period.rs`

## Преимущества

✅ **Лучший UX** - пользователь выбирает дату из календаря, а не вводит вручную  
✅ **Меньше ошибок** - формат даты всегда правильный  
✅ **Быстрее** - автозаполнение даты окончания экономит время  
✅ **Удобнее** - работает на всех устройствах одинаково хорошо  
✅ **Умнее** - система понимает, что обычно нужен целый месяц

## Совместимость

Поддерживается во всех современных браузерах:

- Chrome/Edge 20+
- Firefox 57+
- Safari 14.1+
- Opera 11+
- Mobile browsers (iOS Safari, Chrome Mobile)
