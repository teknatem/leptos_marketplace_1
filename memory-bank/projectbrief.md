# Leptos Marketplace - Project Brief

## Цель проекта

Создать полнофункциональную десктопную систему управления маркетплейсами с интеграцией 1С:Управление торговлей 11, Wildberries и Ozon на базе современного Rust full-stack стека (Leptos + Axum).

## Проблема, которую решаем

Компании, работающие с маркетплейсами и использующие 1С:УТ11, сталкиваются с проблемами:
- Ручная синхронизация данных между системами
- Отсутствие единого view на продажи и комиссии маркетплейсов
- Сложность аналитики по множественным каналам продаж
- Необходимость держать данные в разных системах

## Решение

Единое приложение, которое:
1. **Импортирует** справочники из 1С:УТ11 через OData
2. **Интегрируется** с API маркетплейсов (Wildberries, Ozon, LemanaPro)
3. **Синхронизирует** товары, заказы, продажи, финансовые отчеты
4. **Агрегирует** данные для аналитики и отчетности
5. **Предоставляет** удобный веб-интерфейс для работы

## Ключевые функции

### Управление справочниками (Aggregates)
- **a001**: Подключения к 1С
- **a002**: Организации
- **a003**: Продукты
- **a004**: Номенклатура
- **a005**: Подключения к маркетплейсам (Wildberries)
- **a006**: Подключения к маркетплейсам (Ozon)
- **a010**: Баркоды товаров
- **a012**: Склады и организационные связи
- **a014**: Транзакции Ozon
- **a015**: Заказы Wildberries

### Операции (UseCases)
- **u501**: Импорт справочников из 1С:УТ11 (организации, номенклатура, контрагенты)
- **u504**: Импорт данных из Wildberries (продажи, заказы, финансовые отчеты)
- **u505**: Импорт данных из Ozon (транзакции, заказы, отчеты)
- **u506**: Интеграция с LemanaPro (аналитика, планирование)

### Аналитика (Projections)
- **p902**: Регистр продаж (сводная таблица продаж)
- **p903**: Финансовый отчет Wildberries
- **p904**: Аналитика продаж (кросс-маркетплейс аналитика)
- **p905**: История комиссий Wildberries

## Технологический стек

### Frontend
- **Leptos 0.6**: Современный Rust фреймворк, компилируется в WASM
- **Reactive signals**: Реактивная система управления состоянием
- **CSS**: Компонентный подход к стилям

### Backend
- **Axum**: Async web-фреймворк на Rust
- **SQLite**: Встроенная база данных (marketplace.db)
- **Serde**: Сериализация/десериализация данных
- **Chrono**: Работа с датами и временем

### Architecture
- **DDD** (Domain-Driven Design): Разделение на домены
- **VSA** (Vertical Slice Architecture): Группировка по фичам, не слоям
- **Cargo Workspace**: 3 крейта (contracts, backend, frontend)
- **Indexed naming**: a001-a499 (агрегаты), u501-u999 (операции), p901-p999 (проекции)

## Целевая аудитория

- Малый/средний бизнес, работающий с маркетплейсами
- Использующие 1С:Управление торговлей 11
- Нужен единый инструмент для управления и аналитики

## Успех проекта измеряется

1. **Автоматизация**: Снижение ручного труда на синхронизацию данных
2. **Централизация**: Все данные в одном месте
3. **Аналитика**: Быстрый доступ к кросс-маркетплейс отчетам
4. **Надежность**: Стабильная работа интеграций
5. **Performance**: Быстрая загрузка больших объемов данных

## Ограничения и контекст

- **Desktop-first**: Приложение для локального запуска (не SaaS)
- **SQLite**: Не требует внешней БД, все в одном файле
- **Windows 11**: Основная платформа разработки и использования
- **Single-user**: Одновременная работа одного пользователя
- **Offline-capable**: Может работать без постоянного подключения к 1С

## Принципы разработки

1. **Simplicity first**: Начинаем с простого, усложняем при необходимости
2. **Type safety**: Максимум проверок на этапе компиляции
3. **Shared contracts**: Единые типы между frontend и backend
4. **Convention over configuration**: Соглашения об именовании вместо конфигов
5. **Vertical slices**: Группируем код по фичам, а не по техническим слоям

