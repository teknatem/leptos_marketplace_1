# –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã —Ç–∞–±–ª–∏—Ü (Table Standards)

## –û–±–∑–æ—Ä

–ï–¥–∏–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –≤—Å–µ—Ö —Å–ø–∏—Å–∫–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ —Å –¥–≤—É–º—è —É—Ä–æ–≤–Ω—è–º–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-19  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## –î–≤–∞ —Ç–∏–ø–∞ —Ç–∞–±–ª–∏—Ü

### –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π           | –ü—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞                         | –°–ª–æ–∂–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞                   |
| ------------------ | --------------------------------------- | --------------------------------- |
| **–ü—Ä–∏–º–µ—Ä—ã**        | –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã, –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ | –ü—Ä–æ–¥–∞–∂–∏, –ó–∞–∫–∞–∑—ã, –í–æ–∑–≤—Ä–∞—Ç—ã         |
| **–ó–∞–ø–∏—Å–µ–π**        | –î–æ 100-200                              | 1000+                             |
| **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è**     | –†–µ–¥–∫–∏–µ                                  | –ß–∞—Å—Ç—ã–µ                            |
| **–ü–∞–≥–∏–Ω–∞—Ü–∏—è**      | ‚ùå –ù–µ—Ç (–≤—Å–µ —Å—Ä–∞–∑—É)                      | ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω–∞—è (offset/limit)       |
| **–§–∏–ª—å—Ç—Ä—ã**        | –¢–æ–ª—å–∫–æ –ø–æ–∏—Å–∫                            | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å collapse     |
| **–ò—Ç–æ–≥–∏**          | ‚ùå –ù–µ—Ç                                  | ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∏—Ç–æ–≥–∏ –≤ header       |
| **–ß–µ–∫–±–æ–∫—Å—ã**       | ‚úÖ –î–∞                                   | ‚úÖ –î–∞                             |
| **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**     | ‚úÖ –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è                           | ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω–∞—è                      |
| **Resize –∫–æ–ª–æ–Ω–æ–∫** | ‚ùå –ù–µ—Ç                                  | ‚úÖ –î–∞ + —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage |
| **–≠–∫—Å–ø–æ—Ä—Ç Excel**  | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ                             | ‚úÖ –î–∞                             |
| **Post/Unpost**    | ‚ùå –ù–µ—Ç                                  | ‚úÖ Batch –æ–ø–µ—Ä–∞—Ü–∏–∏                 |

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ç–∏–ø

**–ü—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞:**

- –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- –î–∞–Ω–Ω—ã–µ —Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –Ω–µ–≤–µ–ª–∏–∫–æ (< 200)
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–ª–æ–∂–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

**–°–ª–æ–∂–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞:**

- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–¥–æ–∫—É–º–µ–Ω—Ç—ã, –æ–ø–µ—Ä–∞—Ü–∏–∏)
- –ë–æ–ª—å—à–∏–µ –æ–±—ä—ë–º—ã –¥–∞–Ω–Ω—ã—Ö (1000+)
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º –∏ –¥—Ä—É–≥–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
- –ù—É–∂–Ω—ã batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

## BEM –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### –ü—Ä–∞–≤–∏–ª–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

–í—Å–µ –∫–ª–∞—Å—Å—ã —Ç–∞–±–ª–∏—Ü —Å–ª–µ–¥—É—é—Ç BEM: `.table__element--modifier`

```css
/* –ë–ª–æ–∫ */
.table
.table__data
.table__head

/* –≠–ª–µ–º–µ–Ω—Ç—ã */
.table__row
.table__cell
.table__header-cell
.table__checkbox

/* –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã */
.table__cell--checkbox
.table__cell--right        /* ONLY for cell values, NOT for headers */
.table__row--selected
.table--striped;
```

**–í–ê–ñ–ù–û –ø–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—é:**
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∫–æ–ª–æ–Ω–æ–∫ –≤—Å–µ–≥–¥–∞ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è **–≤–ª–µ–≤–æ** (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.table__header-cell` –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞)
- –ß–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —è—á–µ–π–∫–∞—Ö –≤—ã—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è **–≤–ø—Ä–∞–≤–æ** (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.table__cell--right`)
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.table__header-cell--right` - –∫–ª–∞—Å—Å —É—Å—Ç–∞—Ä–µ–ª

### ‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ

```css
.checkbox-cell {
} /* kebab-case –±–µ–∑ BEM */
.tableCell {
} /* camelCase */
.cell {
} /* –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –±–ª–æ–∫–∞ */
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ

```rust
// –í Rust –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
<td class="table__cell table__cell--checkbox">
<tr class="table__row table__row--selected">
```

---

## –ü—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

1. **Header**

   - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ø–∏—Å–∫–∞
   - –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å"
   - –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å"
   - –ö–Ω–æ–ø–∫–∞ "–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ" (disabled –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ)

2. **–¢–∞–±–ª–∏—Ü–∞**

   - –ö–æ–ª–æ–Ω–∫–∞ —á–µ–∫–±–æ–∫—Å–æ–≤ (–ø–µ—Ä–≤–∞—è, 40px)
   - –°–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
   - Hover —ç—Ñ—Ñ–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö
   - –ö–ª–∏–∫ –Ω–∞ —Å—Ç—Ä–æ–∫—É ‚Üí –æ—Ç–∫—Ä—ã—Ç—å detail

3. **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ**
   - –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Å—Ç—Ä–æ–∫—É –∏–ª–∏ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å"

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```rust
pub mod state;

use leptos::prelude::*;
use crate::shared::modal::Modal;
use crate::domain::aXXX_feature::ui::details::FeatureDetails;

#[derive(Clone, Debug)]
pub struct FeatureRow {
    pub id: String,
    pub code: String,
    pub description: String,
    // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}

#[component]
pub fn FeatureList() -> impl IntoView {
    let (items, set_items) = signal::<Vec<FeatureRow>>(Vec::new());
    let (error, set_error) = signal::<Option<String>>(None);
    let (show_modal, set_show_modal) = signal(false);
    let (editing_id, set_editing_id) = signal::<Option<String>>(None);
    let (selected, set_selected) = signal::<HashSet<String>>(HashSet::new());

    let fetch = move || {
        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –í–°–ï –∑–∞–ø–∏—Å–∏ (–±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏)
    };

    let toggle_select = move |id: String, checked: bool| {
        set_selected.update(|s| {
            if checked {
                s.insert(id);
            } else {
                s.remove(&id);
            }
        });
    };

    view! {
        <div class="page">
            <div class="header">
                <div class="header__content">
                    <h1 class="header__title">"–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫"</h1>
                </div>
                <div class="header__actions">
                    <button class="button button--primary" on:click=move |_| {
                        set_editing_id.set(None);
                        set_show_modal.set(true);
                    }>
                        {icon("plus")} "–°–æ–∑–¥–∞—Ç—å"
                    </button>
                    <button class="button button--secondary" on:click=move |_| fetch()>
                        {icon("refresh")} "–û–±–Ω–æ–≤–∏—Ç—å"
                    </button>
                    <button
                        class="button button--secondary"
                        on:click=move |_| delete_selected()
                        disabled={move || selected.get().is_empty()}
                    >
                        {icon("trash")} {move || format!("–£–¥–∞–ª–∏—Ç—å ({})", selected.get().len())}
                    </button>
                </div>
            </div>

            <div class="table">
                <table class="table__data table--striped">
                    <thead class="table__head">
                        <tr>
                            <th class="table__header-cell table__header-cell--checkbox">
                                <input type="checkbox" on:change=toggle_select_all />
                            </th>
                            <th class="table__header-cell table__header-cell--sortable" on:click=toggle_sort("code")>
                                "–ö–æ–¥" {get_sort_indicator("code", &sort_field, sort_ascending)}
                            </th>
                            <th class="table__header-cell">"–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ"</th>
                        </tr>
                    </thead>
                    <tbody>
                        {move || items.get().into_iter().map(|row| {
                            let id = row.id.clone();
                            let is_selected = selected.get().contains(&id);
                            view! {
                                <tr
                                    class="table__row"
                                    class:table__row--selected=is_selected
                                    on:click=move |_| {
                                        set_editing_id.set(Some(id.clone()));
                                        set_show_modal.set(true);
                                    }
                                >
                                    <td class="table__cell table__cell--checkbox" on:click=|e| e.stop_propagation()>
                                        <input
                                            type="checkbox"
                                            class="table__checkbox"
                                            prop:checked=is_selected
                                            on:change=move |ev| {
                                                let checked = event_target_checked(&ev);
                                                toggle_select(id.clone(), checked);
                                            }
                                        />
                                    </td>
                                    <td class="table__cell">{row.code}</td>
                                    <td class="table__cell">{row.description}</td>
                                </tr>
                            }
                        }).collect_view()}
                    </tbody>
                </table>
            </div>

            <Show when=move || show_modal.get()>
                <Modal
                    title=move || if editing_id.get().is_some() { "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ" } else { "–°–æ–∑–¥–∞–Ω–∏–µ" }
                    on_close=Callback::new(move |_| {
                        set_show_modal.set(false);
                        set_editing_id.set(None);
                    })
                >
                    <FeatureDetails
                        id=editing_id.get()
                        on_saved=Rc::new(move |_| {
                            set_show_modal.set(false);
                            set_editing_id.set(None);
                            fetch();
                        })
                        on_cancel=Rc::new(move |_| {
                            set_show_modal.set(false);
                            set_editing_id.set(None);
                        })
                    />
                </Modal>
            </Show>
        </div>
    }
}
```

### CSS –∫–ª–∞—Å—Å—ã (BEM)

```css
/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
.page {
}

/* Header */
.header {
}
.header__content {
}
.header__title {
}
.header__actions {
}

/* –¢–∞–±–ª–∏—Ü–∞ */
.table {
}
.table__data {
}
.table__head {
}
.table__row {
}
.table__row--selected {
}
.table__cell {
}
.table__cell--checkbox {
}
.table__header-cell {
}
.table__header-cell--checkbox {
}
.table__header-cell--sortable {
}
.table__checkbox {
}

/* –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª–æ—Å–∞—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã */
.table--striped {
}
```

---

## –°–ª–æ–∂–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

1. **Page Header (–≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω)**

   - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ø–∏—Å–∫–∞ —Å –∏–∫–æ–Ω–∫–æ–π
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è: `‚èÆ ‚óÄ "1 / N (total)" ‚ñ∂ ‚è≠` + select page_size
   - –ö–Ω–æ–ø–∫–∏ Post/Unpost —Å —Å—á—ë—Ç—á–∏–∫–æ–º: `‚úì Post (n)` / `‚úó Unpost (n)`
   - –ö–Ω–æ–ø–∫–∞ Excel: `üìä Excel`
   - –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—å

2. **Filter Panel (collapsible)**

   - –§–∏–ª—å—Ç—Ä –ø–µ—Ä–∏–æ–¥–∞: DateInput + DateInput + MonthSelector
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, —Ç–∏–ø –∏ —Ç.–ø.)
   - –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∫–∞–∫ removable tags
   - –ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ"

3. **–¢–∞–±–ª–∏—Ü–∞**
   - –ö–æ–ª–æ–Ω–∫–∞ —á–µ–∫–±–æ–∫—Å–æ–≤ (–ø–µ—Ä–≤–∞—è, 40px)
   - –°–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏
   - **–°—Ç—Ä–æ–∫–∞ –∏—Ç–æ–≥–æ–≤ –≤ thead** (sticky, —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
   - Resize –∫–æ–ª–æ–Ω–æ–∫ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ localStorage
   - –ü–µ—Ä–µ—Ö–æ–¥ –≤ detail –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Å—Ç—Ä–æ–∫—É

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```rust
pub mod state;

use self::state::create_state;
use leptos::prelude::*;
use crate::shared::components::{
    date_input::DateInput,
    month_selector::MonthSelector,
    pagination_controls::PaginationControls,
    table_totals_row::TableTotalsRow,
};
use crate::shared::table_utils::{init_column_resize, was_just_resizing};

const TABLE_ID: &str = "aXXX-feature-table";
const COLUMN_WIDTHS_KEY: &str = "aXXX_feature_column_widths";

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct PaginatedResponse {
    pub items: Vec<FeatureDto>,
    pub total: usize,
    pub page: usize,
    pub page_size: usize,
    pub total_pages: usize,
    pub totals: Option<ServerTotals>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ServerTotals {
    pub total_records: usize,
    pub sum_amount: f64,
    // ... –¥—Ä—É–≥–∏–µ –∏—Ç–æ–≥–∏
}

#[component]
pub fn FeatureList() -> impl IntoView {
    let state = create_state();
    let global_ctx = expect_context::<AppGlobalContext>();

    let (items, set_items) = signal::<Vec<FeatureDto>>(Vec::new());
    let (loading, set_loading) = signal(false);
    let (error, set_error) = signal::<Option<String>>(None);
    let (is_filter_expanded, set_is_filter_expanded) = signal(false);

    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞
    let load_data = move || {
        let current_state = state.get();
        set_loading.set(true);

        spawn_local(async move {
            let offset = current_state.page * current_state.page_size;
            let sort_desc = !current_state.sort_ascending;

            let url = format!(
                "http://localhost:3000/api/feature/list?limit={}&offset={}&sort_by={}&sort_desc={}&date_from={}&date_to={}",
                current_state.page_size,
                offset,
                current_state.sort_field,
                sort_desc,
                current_state.date_from,
                current_state.date_to
            );

            match Request::get(&url).send().await {
                Ok(response) => {
                    if response.status() == 200 {
                        match response.json::<PaginatedResponse>().await {
                            Ok(data) => {
                                set_items.set(data.items);
                                state.update(|s| {
                                    s.total_count = data.total;
                                    s.total_pages = data.total_pages;
                                    s.server_totals = data.totals;
                                    s.is_loaded = true;
                                });
                                set_loading.set(false);
                            }
                            Err(e) => {
                                set_error.set(Some(format!("Parse error: {}", e)));
                                set_loading.set(false);
                            }
                        }
                    }
                }
                Err(e) => {
                    set_error.set(Some(format!("Fetch error: {}", e)));
                    set_loading.set(false);
                }
            }
        });
    };

    // Init column resize
    Effect::new(move |_| {
        if state.get().is_loaded {
            spawn_local(async move {
                gloo_timers::future::TimeoutFuture::new(50).await;
                init_column_resize(TABLE_ID, COLUMN_WIDTHS_KEY);
            });
        }
    });

    view! {
        <div class="page">
            // Page Header
            <div class="page-header">
                <div class="page-header__content">
                    <div class="page-header__icon">{icon("file-text")}</div>
                    <div class="page-header__text">
                        <h1 class="page-header__title">"–î–æ–∫—É–º–µ–Ω—Ç—ã"</h1>
                        <div class="page-header__badge">
                            <Badge variant="primary".to_string()>
                                {move || state.get().total_count.to_string()}
                            </Badge>
                        </div>
                    </div>
                </div>
                <div class="page-header__actions">
                    <Button variant="primary".to_string() on_click=Callback::new(move |_| load_data())>
                        {icon("refresh")} "–û–±–Ω–æ–≤–∏—Ç—å"
                    </Button>
                    <Button
                        variant="success".to_string()
                        on_click=Callback::new(batch_post)
                        disabled=state.get().selected_ids.is_empty()
                    >
                        {icon("check")} {move || format!("Post ({})", state.get().selected_ids.len())}
                    </Button>
                    <Button
                        variant="warning".to_string()
                        on_click=Callback::new(batch_unpost)
                        disabled=state.get().selected_ids.is_empty()
                    >
                        {icon("x")} {move || format!("Unpost ({})", state.get().selected_ids.len())}
                    </Button>
                    <Button variant="secondary".to_string() on_click=Callback::new(export_excel)>
                        {icon("download")} "Excel"
                    </Button>
                </div>
            </div>

            // Filter Panel
            <div class="filter-panel">
                <div class="filter-panel-header">
                    <div class="filter-panel-header__left" on:click=move |_| set_is_filter_expanded.update(|e| *e = !*e)>
                        <svg class=move || if is_filter_expanded.get() {
                            "filter-panel__chevron filter-panel__chevron--expanded"
                        } else {
                            "filter-panel__chevron"
                        }>
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                        {icon("filter")}
                        <span class="filter-panel__title">"–§–∏–ª—å—Ç—Ä—ã"</span>
                        {move || {
                            let count = active_filters_count.get();
                            if count > 0 {
                                view! { <Badge variant="primary".to_string()>{count}</Badge> }.into_any()
                            } else {
                                view! { <></> }.into_any()
                            }
                        }}
                    </div>
                    <div class="filter-panel-header__center">
                        <PaginationControls
                            current_page=Signal::derive(move || state.get().page)
                            total_pages=Signal::derive(move || state.get().total_pages)
                            total_count=Signal::derive(move || state.get().total_count)
                            page_size=Signal::derive(move || state.get().page_size)
                            on_page_change=Callback::new(go_to_page)
                            on_page_size_change=Callback::new(change_page_size)
                        />
                    </div>
                </div>

                <div class=move || if is_filter_expanded.get() {
                    "filter-panel__collapsible filter-panel__collapsible--expanded"
                } else {
                    "filter-panel__collapsible filter-panel__collapsible--collapsed"
                }>
                    <div class="filter-panel-content">
                        <div class="filter-grid">
                            <div class="form__group">
                                <label class="form__label">"–ü–µ—Ä–∏–æ–¥:"</label>
                                <div style="display: flex; gap: var(--spacing-xs);">
                                    <DateInput
                                        value=Signal::derive(move || state.get().date_from)
                                        on_change=move |val| {
                                            state.update(|s| { s.date_from = val; s.page = 0; });
                                            load_data();
                                        }
                                    />
                                    <span>" ‚Äî "</span>
                                    <DateInput
                                        value=Signal::derive(move || state.get().date_to)
                                        on_change=move |val| {
                                            state.update(|s| { s.date_to = val; s.page = 0; });
                                            load_data();
                                        }
                                    />
                                    <MonthSelector
                                        on_select=Callback::new(move |(from, to)| {
                                            state.update(|s| {
                                                s.date_from = from;
                                                s.date_to = to;
                                                s.page = 0;
                                            });
                                            load_data();
                                        })
                                    />
                                </div>
                            </div>
                        </div>

                        // Active filter tags
                        {move || {
                            let has_filters = active_filters_count.get() > 0;
                            if has_filters {
                                view! {
                                    <div class="filter-tags">
                                        // ... removable filter tags ...
                                        <Button variant="ghost".to_string() on_click=Callback::new(clear_all_filters)>
                                            "–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ"
                                        </Button>
                                    </div>
                                }.into_any()
                            } else {
                                view! { <></> }.into_any()
                            }
                        }}
                    </div>
                </div>
            </div>

            // Table
            <div class="page-content">
                <div class="list-container">
                    <table id=TABLE_ID class="table__data table--striped">
                        <thead class="table__head">
                            <tr>
                                <th class="table__header-cell table__header-cell--checkbox">
                                    <input type="checkbox" on:change=toggle_select_all />
                                </th>
                                <th class="table__header-cell table__header-cell--sortable resizable" on:click=toggle_sort("date")>
                                    "–î–∞—Ç–∞" {get_sort_indicator("date", &sort_field, sort_ascending)}
                                </th>
                                <th class="table__header-cell resizable">"–ù–æ–º–µ—Ä"</th>
                                <th class="table__header-cell resizable">"–°—É–º–º–∞"</th>
                            </tr>

                            // –°—Ç—Ä–æ–∫–∞ –∏—Ç–æ–≥–æ–≤ (–ª–µ–≥–∫–æ –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ if)
                            {move || {
                                if let Some(totals) = state.get().server_totals {
                                    view! {
                                        <TableTotalsRow>
                                            <td class="table__cell--checkbox"></td>
                                            <td>{format!("–ó–∞–ø–∏—Å–µ–π: {}", totals.total_records)}</td>
                                            <td></td>
                                            <td class="table__cell--right">{format_number(totals.sum_amount)}</td>
                                        </TableTotalsRow>
                                    }.into_any()
                                } else {
                                    view! { <></> }.into_any()
                                }
                            }}
                        </thead>
                        <tbody>
                            {move || items.get().into_iter().map(|item| {
                                let id = item.id.clone();
                                let is_selected = state.get().selected_ids.contains(&id);
                                view! {
                                    <tr
                                        class="table__row"
                                        class:table__row--selected=is_selected
                                        on:click=move |_| open_detail(id.clone())
                                    >
                                        <td class="table__cell table__cell--checkbox" on:click=|e| e.stop_propagation()>
                                            <input
                                                type="checkbox"
                                                class="table__checkbox"
                                                prop:checked=is_selected
                                                on:change=move |_| toggle_select(id.clone())
                                            />
                                        </td>
                                        <td class="table__cell">{format_date(&item.date)}</td>
                                        <td class="table__cell">{item.number}</td>
                                        <td class="table__cell table__cell--right">{format_number(item.amount)}</td>
                                    </tr>
                                }
                            }).collect_view()}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    }
}
```

### State —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```rust
// state.rs
use chrono::{Datelike, Utc};
use leptos::prelude::*;

#[derive(Clone, Debug)]
pub struct FeatureState {
    // –î–∞–Ω–Ω—ã–µ
    pub items: Vec<FeatureDto>,

    // –§–∏–ª—å—Ç—Ä—ã
    pub date_from: String,
    pub date_to: String,
    pub selected_organization_id: Option<String>,

    // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
    pub sort_field: String,
    pub sort_ascending: bool,

    // –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä
    pub selected_ids: Vec<String>,

    // –§–ª–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏
    pub is_loaded: bool,

    // –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
    pub page: usize,
    pub page_size: usize,
    pub total_count: usize,
    pub total_pages: usize,

    // –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∏—Ç–æ–≥–∏
    pub server_totals: Option<ServerTotals>,
}

impl Default for FeatureState {
    fn default() -> Self {
        // –ü–µ—Ä–∏–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü
        let now = Utc::now().date_naive();
        let year = now.year();
        let month = now.month();
        let month_start = chrono::NaiveDate::from_ymd_opt(year, month, 1)
            .expect("Invalid month start");
        let month_end = if month == 12 {
            chrono::NaiveDate::from_ymd_opt(year + 1, 1, 1)
                .map(|d| d - chrono::Duration::days(1))
                .expect("Invalid month end")
        } else {
            chrono::NaiveDate::from_ymd_opt(year, month + 1, 1)
                .map(|d| d - chrono::Duration::days(1))
                .expect("Invalid month end")
        };

        Self {
            items: Vec::new(),
            date_from: month_start.format("%Y-%m-%d").to_string(),
            date_to: month_end.format("%Y-%m-%d").to_string(),
            selected_organization_id: None,
            sort_field: "date".to_string(),
            sort_ascending: false,  // –Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞
            selected_ids: Vec::new(),
            is_loaded: false,
            // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
            page: 0,
            page_size: 100,
            total_count: 0,
            total_pages: 0,
            // –ò—Ç–æ–≥–∏
            server_totals: None,
        }
    }
}

pub fn create_state() -> RwSignal<FeatureState> {
    RwSignal::new(FeatureState::default())
}
```

---

## –ß–µ–∫–ª–∏—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É

### –ü—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞ ‚úì

- [ ] –ß–µ–∫–±–æ–∫—Å—ã –≤ –ø–µ—Ä–≤–æ–π –∫–æ–ª–æ–Ω–∫–µ (40px —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞)
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- [ ] –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
- [ ] –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ö–Ω–æ–ø–∫–∞ "–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ" —Å —Å—á—ë—Ç—á–∏–∫–æ–º
- [ ] –ü–µ—Ä–µ—Ö–æ–¥ –≤ detail –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Å—Ç—Ä–æ–∫—É
- [ ] **BEM:** –í—Å–µ –∫–ª–∞—Å—Å—ã —Å–ª–µ–¥—É—é—Ç `.table__element--modifier`
- [ ] –ù–µ—Ç inline-—Å—Ç–∏–ª–µ–π (–∫—Ä–æ–º–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö)
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### –°–ª–æ–∂–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ ‚úì

- [ ] –ß–µ–∫–±–æ–∫—Å—ã –≤ –ø–µ—Ä–≤–æ–π –∫–æ–ª–æ–Ω–∫–µ (40px —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞)
- [ ] –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è (offset/limit)
- [ ] –§–∏–ª—å—Ç—Ä-–ø–∞–Ω–µ–ª—å —Å collapse
- [ ] –°—Ç—Ä–æ–∫–∞ –∏—Ç–æ–≥–æ–≤ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –≤ thead (—á–µ—Ä–µ–∑ TableTotalsRow)
- [ ] –ö–Ω–æ–ø–∫–∏ Post/Unpost –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å —Å—á—ë—Ç—á–∏–∫–æ–º
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- [ ] Resize –∫–æ–ª–æ–Ω–æ–∫ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ localStorage
- [ ] –ü–µ—Ä–µ—Ö–æ–¥ –≤ detail –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Å—Ç—Ä–æ–∫—É
- [ ] **BEM:** –í—Å–µ –∫–ª–∞—Å—Å—ã —Å–ª–µ–¥—É—é—Ç `.table__element--modifier`
- [ ] –ù–µ—Ç inline-—Å—Ç–∏–ª–µ–π (–∫—Ä–æ–º–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö width)
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- [ ] Active filter tags —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∏—è

### BEM Code Review ‚úì

- [ ] –ù–µ—Ç –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–∞ `.checkbox-cell` (–∏—Å–ø–æ–ª—å–∑—É–µ–º `.table__cell--checkbox`)
- [ ] –ù–µ—Ç inline-—Å—Ç–∏–ª–µ–π (–∫—Ä–æ–º–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö width –¥–ª—è resize)
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ hardcode
- [ ] –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –±–∞–∑–æ–≤—ã–º –∫–ª–∞—Å—Å–æ–º
- [ ] –ù–µ—Ç –≥–ª—É–±–æ–∫–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (max 2 —É—Ä–æ–≤–Ω—è: `block__element`)
- [ ] –í—Å–µ –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `.table__`

---

## –≠—Ç–∞–ª–æ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

**–ü—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞:**

- `a002_organization` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `a005_marketplace` - –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã

**–°–ª–æ–∂–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞:**

- `a016_ym_returns` - –í–æ–∑–≤—Ä–∞—Ç—ã –Ø–Ω–¥–µ–∫—Å (–≠–¢–ê–õ–û–ù)
- `a012_wb_sales` - –ü—Ä–æ–¥–∞–∂–∏ Wildberries

---

## –°–º. —Ç–∞–∫–∂–µ

- [List Standard](./list-standard.md) - –î–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç —Å–ø–∏—Å–∫–æ–≤
- [Detail Form Standard](./detail-form-standard.md) - –°—Ç–∞–Ω–¥–∞—Ä—Ç —Ñ–æ—Ä–º –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- [Modal UI Standard](./modal-ui-standard.md) - –°—Ç–∞–Ω–¥–∞—Ä—Ç –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
- `E:\dev\bolt\bolt-mpi-ui-redesign\BEM_MIGRATION_MAP.md` - –†–µ—Ñ–µ—Ä–µ–Ω—Å BEM
