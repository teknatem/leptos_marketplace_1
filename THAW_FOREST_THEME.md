# –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω Thaw UI –¥–ª—è –ª–µ—Å–Ω–æ–π —Ç–µ–º—ã

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ —Ñ–æ–Ω–∞ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Thaw UI –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ª–µ—Å–Ω–æ–π —Ç–µ–º—ã.

## üìù –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `set_thaw_background`

**–§–∞–π–ª:** `crates/frontend/src/shared/theme/theme_select.rs` (—Å—Ç—Ä–æ–∫–∏ 50-62)

```rust
/// Set CSS variable for Thaw ConfigProvider
fn set_thaw_background(value: &str) {
    if let Some(window) = web_sys::window() {
        if let Some(document) = window.document() {
            // Find .thaw-config-provider element
            if let Some(element) = document.query_selector(".thaw-config-provider").ok().flatten() {
                if let Some(html_element) = element.dyn_ref::<web_sys::HtmlElement>() {
                    let _ = html_element.style().set_property("--colorNeutralBackground1", value);
                }
            }
        }
    }
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- –ù–∞—Ö–æ–¥–∏—Ç —ç–ª–µ–º–µ–Ω—Ç `.thaw-config-provider` –≤ DOM
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `--colorNeutralBackground1`
- –î–ª—è forest —Ç–µ–º—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `"transparent"`
- –î–ª—è –¥—Ä—É–≥–∏—Ö —Ç–µ–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `""` (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ = –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏—é `change_theme`

–ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ç–µ–º—ã —á–µ—Ä–µ–∑ UI:

```rust
// Update Thaw theme
if let Some(ctx) = thaw_theme_ctx {
    let thaw_theme = match theme.as_str() {
        "light" => Theme::light(),
        "dark" => Theme::dark(),
        "forest" => Theme::dark(),
        _ => Theme::dark(),
    };
    ctx.0.set(thaw_theme);

    // Set transparent background for forest theme
    if theme == "forest" {
        set_thaw_background("transparent");
    } else {
        set_thaw_background("");
    }
}
```

### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–í `Effect::new` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π —Ç–µ–º—ã:

```rust
// Set transparent background for forest theme on mount
if saved_theme == "forest" {
    set_thaw_background("transparent");
}
```

## üé® –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ —Ç–µ–º–∞–º

| –¢–µ–º–∞        | Thaw UI Theme    | –§–æ–Ω ConfigProvider     | –û–ø–∏—Å–∞–Ω–∏–µ                              |
| ----------- | ---------------- | ---------------------- | ------------------------------------- |
| **–°–≤–µ—Ç–ª–∞—è** | `Theme::light()` | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Å–≤–µ—Ç–ª—ã–π) | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞              |
| **–¢–µ–º–Ω–∞—è**  | `Theme::dark()`  | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Ç–µ–º–Ω—ã–π)  | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞               |
| **–õ–µ—Å–Ω–∞—è**  | `Theme::dark()`  | **transparent**        | –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω, –≤–∏–¥–Ω–∞ –ª–µ—Å–Ω–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞ |

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```mermaid
flowchart TD
    PageLoad[–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã] --> LoadTheme[–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–º—É –∏–∑ localStorage]
    LoadTheme --> CheckSaved{–¢–µ–º–∞ = forest?}

    CheckSaved -->|–î–∞| SetTransparentMount[set_thaw_background transparent]
    CheckSaved -->|–ù–µ—Ç| SkipMount[–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å]

    UserClick[–ö–ª–∏–∫ –Ω–∞ –ø–∞–ª–∏—Ç—Ä—É] --> SelectTheme[–í—ã–±–æ—Ä —Ç–µ–º—ã]
    SelectTheme --> ApplyCSS[–ü—Ä–∏–º–µ–Ω–∏—Ç—å CSS —Ç–µ–º—ã]
    ApplyCSS --> SetThawTheme[–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Thaw —Ç–µ–º—É]
    SetThawTheme --> CheckForest{–¢–µ–º–∞ = forest?}

    CheckForest -->|–î–∞| SetTransparent[set_thaw_background transparent]
    CheckForest -->|–ù–µ—Ç| ResetBg[set_thaw_background empty]

    SetTransparent --> FindElement[querySelector .thaw-config-provider]
    ResetBg --> FindElement2[querySelector .thaw-config-provider]

    FindElement --> SetVar[style.setProperty --colorNeutralBackground1 transparent]
    FindElement2 --> ResetVar[style.setProperty --colorNeutralBackground1 empty]

    SetVar --> TransparentResult[–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω –≤–∏–¥–Ω–∞ –ª–µ—Å–Ω–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞]
    ResetVar --> DefaultResult[–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ–Ω —Ç–µ–º—ã]
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–î–æ–∂–¥–∏—Ç–µ—Å—å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ Trunk**

   - Trunk –¥–æ–ª–∂–µ–Ω –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –ñ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è "applying new distribution" –∏ "success"

2. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (F5)

3. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ "–¢–µ—Å—Ç Thaw UI"**

   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –¢–µ—Å—Ç Thaw UI

4. **–ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ —Ç–µ–º—ã —á–µ—Ä–µ–∑ –ø–∞–ª–∏—Ç—Ä—É:**

   **–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞:**

   - –§–æ–Ω Thaw –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: —Å–≤–µ—Ç–ª—ã–π
   - Button, Input, Badge: —Å–≤–µ—Ç–ª—ã–µ —Ü–≤–µ—Ç–∞

   **–¢–µ–º–Ω–∞—è —Ç–µ–º–∞:**

   - –§–æ–Ω Thaw –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: —Ç–µ–º–Ω—ã–π
   - Button, Input, Badge: —Ç–µ–º–Ω—ã–µ —Ü–≤–µ—Ç–∞

   **–õ–µ—Å–Ω–∞—è —Ç–µ–º–∞:**

   - –§–æ–Ω ConfigProvider: **–ü–†–û–ó–†–ê–ß–ù–´–ô**
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Thaw: —Ç–µ–º–Ω—ã–µ —Ü–≤–µ—Ç–∞
   - –í–∏–¥–Ω–∞ –ª–µ—Å–Ω–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞ —Ñ–æ–Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –ª–µ—Å–Ω–æ–π —Ç–µ–º—ã:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üå≤ –õ–µ—Å–Ω–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞ –≤–∏–¥–Ω–∞    ‚îÇ ‚Üê –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω
‚îÇ  —á–µ—Ä–µ–∑ Thaw –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã       ‚îÇ
‚îÇ                              ‚îÇ
‚îÇ  [Button]  [Input___]        ‚îÇ ‚Üê –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π
‚îÇ  [Badge] [Checkbox]          ‚îÇ    –Ω–æ —Ñ–æ–Ω –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è

`--colorNeutralBackground1` - –æ—Å–Ω–æ–≤–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ñ–æ–Ω–∞ –≤ Thaw UI, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:

- ConfigProvider root —ç–ª–µ–º–µ–Ω—Ç
- Card –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- Modal —Ñ–æ–Ω—ã
- –ò –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **ConfigProvider –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ
2. **`set_thaw_background` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é** –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞
3. **CSS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è** –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
4. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è** –¥–æ—á–µ—Ä–Ω–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏

### –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```
1. ConfigProvider render ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç --colorNeutralBackground1 (—Ç–µ–º–Ω—ã–π —Ü–≤–µ—Ç)
2. set_thaw_background("transparent") ‚Üí –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞ transparent
3. –ë—Ä–∞—É–∑–µ—Ä –ø—Ä–∏–º–µ–Ω—è–µ—Ç ‚Üí —Ñ–æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º
```

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É

**–ü—Ä–∏—á–∏–Ω–∞:** ConfigProvider –º–æ–∂–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –ø–æ–∑–∂–µ, —á–µ–º –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `set_thaw_background`

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `requestAnimationFrame`

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ç–µ–º —Ñ–æ–Ω "–º–∏–≥–∞–µ—Ç"

**–ü—Ä–∏—á–∏–Ω–∞:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ DOM

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

## üìä –°—Ç–∞—Ç—É—Å

**–ö–æ–º–ø–∏–ª—è—Ü–∏—è:** ‚úÖ –£—Å–ø–µ—à–Ω–æ  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:** ‚úÖ –í—Å–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã  
**–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:** ‚úÖ –î–∞

---

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2025-12-20  
**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:** `theme_select.rs`  
**–°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞:** +17
