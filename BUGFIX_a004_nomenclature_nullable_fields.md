# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: Nullable –ø–æ–ª—è –∏–∑ 1–° OData

## –î–∞—Ç–∞: 16.11.2025

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã –∏–∑ 1–° –ø–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞:
```
Failed to parse OData JSON: invalid type: null, expected a boolean
```

### –ü—Ä–∏—á–∏–Ω–∞

–í —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–° –ø–æ–ª–µ `–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞` –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–∞–∫ `null`:
```json
{
  "–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞": null,
  "–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞–î–ª—è–û—Å—Ç–∞—Ç–∫–æ–≤_Key": null
}
```

–ù–æ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `UtNomenclatureOData` –º—ã –æ–±—ä—è–≤–∏–ª–∏ –µ–≥–æ –∫–∞–∫ `bool`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å `null` –≤ Rust.

---

## –†–µ—à–µ–Ω–∏–µ

–ò–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø –ø–æ–ª—è `is_assembly` —Å `bool` –Ω–∞ `Option<bool>` –≤ OData —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

### –§–∞–π–ª: `crates/backend/src/domain/a004_nomenclature/u501_import_from_ut.rs`

#### 1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

**–ë—ã–ª–æ:**
```rust
#[serde(rename = "–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞", default)]
pub is_assembly: bool,
```

**–°—Ç–∞–ª–æ:**
```rust
#[serde(rename = "–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞", default)]
pub is_assembly: Option<bool>,
```

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ `to_aggregate()`

**–ë—ã–ª–æ:**
```rust
agg.is_assembly = self.is_assembly;
```

**–°—Ç–∞–ª–æ:**
```rust
agg.is_assembly = self.is_assembly.unwrap_or(false);
```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ `should_update()`

**–ë—ã–ª–æ:**
```rust
|| existing.is_assembly != self.is_assembly
```

**–°—Ç–∞–ª–æ:**
```rust
|| existing.is_assembly != self.is_assembly.unwrap_or(false)
```

### –§–∞–π–ª: `crates/backend/src/usecases/u501_import_from_ut/executor.rs`

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ `process_nomenclature()`

**–ë—ã–ª–æ:**
```rust
existing_item.is_assembly = odata.is_assembly;
```

**–°—Ç–∞–ª–æ:**
```rust
existing_item.is_assembly = odata.is_assembly.unwrap_or(false);
```

---

## –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ null

–ö–æ–≥–¥–∞ –∏–∑ 1–° –ø—Ä–∏—Ö–æ–¥–∏—Ç `null` –¥–ª—è –ø–æ–ª—è `–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞`:
- Serde –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –µ–≥–æ –∫–∞–∫ `None`
- –ü—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ –≤ –∞–≥—Ä–µ–≥–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `unwrap_or(false)`
- –í –ë–î —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ `false` (0)

---

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º –∑–Ω–∞—á–µ–Ω–∏–π

| –ó–Ω–∞—á–µ–Ω–∏–µ –∏–∑ 1–° | OData JSON            | Rust Option      | –ë–î (INTEGER) |
|----------------|-----------------------|------------------|--------------|
| true           | `"–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞": true` | `Some(true)`     | 1            |
| false          | `"–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞": false`| `Some(false)`    | 0            |
| null           | `"–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞": null` | `None`           | 0            |
| –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç    | (–Ω–µ—Ç –ø–æ–ª—è)            | `None` (default) | 0            |

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏

```rust
// –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
let json1 = r#"{"–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞": true}"#;
let json2 = r#"{"–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞": false}"#;
let json3 = r#"{"–¢—Ä–µ–±—É–µ—Ç—Å—è–°–±–æ—Ä–∫–∞": null}"#;
let json4 = r#"{}"#; // –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
```

### 2. –ó–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å backend
cargo run --bin backend

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç –∏–∑ UI –∏–ª–∏ —á–µ—Ä–µ–∑ API
# –î–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—É —Å null –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–ø–∏—Å–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å
SELECT 
    id, 
    description, 
    is_assembly 
FROM a004_nomenclature 
LIMIT 10;

-- –í—Å–µ –∑–∞–ø–∏—Å–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å is_assembly = 0 –∏–ª–∏ 1
```

---

## –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –ø–æ–ª—è

–°–ª–µ–¥—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–∏–µ boolean –ø–æ–ª—è –∏–∑ 1–°, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å null:

- ‚úÖ `is_assembly` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚ö†Ô∏è –î—Ä—É–≥–∏–µ boolean –ø–æ–ª—è –≤ –¥—Ä—É–≥–∏—Ö –∞–≥—Ä–µ–≥–∞—Ç–∞—Ö –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ç—É –∂–µ –ø—Ä–æ–±–ª–µ–º—É

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∏–∑ 1–° OData:

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Option<T>` –¥–ª—è –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å null**
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `unwrap_or(default_value)` –ø—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏**
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–°**

---

## –ö–æ–º–ø–∏–ª—è—Ü–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ
‚úÖ cargo check --package backend
‚úÖ No linter errors
```

---

## –°—Ç–∞—Ç—É—Å

- ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞
- üî≤ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –≠—Ç–æ —Ç–∏–ø–∏—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å OData –∏–∑ 1–°
- 1–° —á–∞—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null` –¥–ª—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- Rust —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è nullable —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ `Option<T>`
- –ê—Ç—Ä–∏–±—É—Ç `#[serde(default)]` –ø–æ–º–æ–≥–∞–µ—Ç, –Ω–æ –Ω–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –¥–ª—è boolean –ø–æ–ª–µ–π

---

*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 16.11.2025*

